/**
 * ng-scrollbar
 * @version v0.0.8 - 2014-10-09
 * @link https://github.com/asafdav/ng-scrollbar
 * @author Asaf David <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("ngScrollbar",[]).directive("ngScrollbar",["$rootScope","$parse","$window","$document",function(a,b,c,d){return{restrict:"A",replace:!0,transclude:!0,scope:!0,link:function(b,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t={bottom:f.hasOwnProperty("bottom"),top:f.hasOwnProperty("top")},u=angular.element(c),v={top:0},w={top:0},x=function(){n={position:"relative",overflow:"hidden","max-width":"100%",height:"100%"},w.height&&(n.height=w.height-w.extraHeight+"px"),o={position:"absolute",height:v.height+"px",top:v.top+"px"},p={position:"relative","line-height":v.height+"px"},q={position:"relative",top:w.top+"px",overflow:"hidden"}},y=function(){j.css("top",v.top+"px");var a=v.top/(v.trackHeight-w.extraHeight);w.top=-Math.round((w.scrollHeight+w.extraHeight)*a),h.css("top",w.top+"px")},z=function(a){var b=a.hasOwnProperty("offsetY")?a.offsetY:a.layerY,c=Math.max(0,Math.min(parseInt(v.trackHeight,10)-parseInt(v.height,10),b));v.top=c,y(),a.stopPropagation()},A=function(a){var b=20,c=void 0!==a.wheelDeltaY?a.wheelDeltaY/b:void 0!==a.wheelDelta?a.wheelDelta/b:-a.detail*(b/10);return v.top=Math.max(0,Math.min(parseInt(v.trackHeight,10)-parseInt(v.height,10),parseInt(v.top,10)-c)),y(),a.preventDefault?void a.preventDefault():!1},B=function(a,b,c){v.top=Math.max(0,Math.min(parseInt(v.trackHeight,10)-parseInt(v.height,10),c)),a.stopPropagation()},C=function(a){var b=a.pageY-j[0].scrollTop-r,c=0;B(a,c,b),y()},D=function(a,b){var e;return a.currentStyle?e=a.currentStyle[b]:c.getComputedStyle&&(e=d[0].defaultView.getComputedStyle(a,null).getPropertyValue(b)),e},E=function(a){var c=e[0].parentElement.offsetTop,d=parseInt(D(e[0],"padding-top"),10)||0,f=parseInt(D(e[0],"padding-bottom"),10)||0,m=parseInt(D(e[0],"border-top-width"),10)||0,s=parseInt(D(e[0],"border-bottom-width"),10)||0,B=d+f+m+s,E=void 0!==u[0].onmousewheel?"mousewheel":"DOMMouseScroll",F=t.bottom||a.rollToBottom,G=t.top||a.rollToTop;g=angular.element(e.children()[0]),h=angular.element(g.children()[0]),i=angular.element(g.children()[1]),j=angular.element(angular.element(i.children()[0]).children()[0]),k=angular.element(j.children()[0]),l=angular.element(angular.element(i.children()[0]).children()[1]),w.height=e[0].offsetHeight-c,w.extraHeight=B,w.scrollHeight=h[0].scrollHeight,w.height<w.scrollHeight?(b.showYScrollbar=!0,v.height=Math.round(w.height/w.scrollHeight*w.height),v.trackHeight=w.height,x(),e.css({overflow:"hidden"}),g.css(n),h.css(q),j.css(o),k.css(p),l.bind("click",z),h[0].addEventListener(E,A,!1),j.on("mousedown",function(a){r=a.pageY-j[0].offsetTop,u.on("mouseup",function(){u.off("mousemove",C),a.stopPropagation()}),u.on("mousemove",C),a.preventDefault()}),F?(t.bottom=!1,v.top=parseInt(w.height,10)-parseInt(v.height,10)):v.top=G?0:Math.max(0,Math.min(parseInt(w.height,10)-parseInt(v.height,10),parseInt(v.top,10))),y()):(b.showYScrollbar=!1,j.off("mousedown"),h[0].removeEventListener(E,A,!1),h.attr("style","position:relative;top:0"),g.css({height:"100%"}))},F={},G=function(a,c){null!=s&&clearTimeout(s),F={rollToBottom:!!c&&!!c.rollToBottom,rollToTop:!!c&&!!c.rollToTop},s=setTimeout(function(){w.height=null,E(F),b.$$phase||b.$digest()},72)};E(F),f.rebuildOn&&f.rebuildOn.split(" ").forEach(function(b){m=a.$on(b,G)}),f.hasOwnProperty("rebuildOnResize")&&u.on("resize",G),b.$on("$destroy",function(){angular.isFunction(m)&&m()})},template:'<div><div class="ngsb-wrap"><div class="ngsb-container" ng-transclude></div><div class="ngsb-scrollbar" style="position: absolute; display: block;" ng-show="showYScrollbar"><div class="ngsb-thumb-container"><div class="ngsb-thumb-pos" oncontextmenu="return false;"><div class="ngsb-thumb" ></div></div><div class="ngsb-track"></div></div></div></div></div>'}}]);