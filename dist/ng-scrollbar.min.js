/**
 * ng-scrollbar
 * @version v0.0.8 - 2014-09-15
 * @link https://github.com/asafdav/ng-scrollbar
 * @author Asaf David <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("ngScrollbar",[]).directive("ngScrollbar",["$rootScope","$parse","$window",function(a,b,c){return{restrict:"A",replace:!0,transclude:!0,scope:!0,link:function(b,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s={bottom:e.hasOwnProperty("bottom"),top:e.hasOwnProperty("top")},t=angular.element(c),u={top:0},v={top:0},w=function(){m={position:"relative",overflow:"hidden","max-width":"100%",height:"100%"},v.height&&(m.height=v.height+"px"),n={position:"absolute",height:u.height+"px",top:u.top+"px"},o={position:"relative","line-height":u.height+"px"},p={position:"relative",top:v.top+"px",overflow:"hidden"}},x=function(){i.css("top",u.top+"px");var a=u.top/v.height;v.top=-Math.round(v.scrollHeight*a),g.css("top",v.top+"px")},y=function(a){var b=a.hasOwnProperty("offsetY")?a.offsetY:a.layerY,c=Math.max(0,Math.min(parseInt(u.trackHeight,10)-parseInt(u.height,10),b));u.top=c,x(),a.stopPropagation()},z=function(a){var b=20,c=void 0!==a.wheelDeltaY?a.wheelDeltaY/b:void 0!==a.wheelDelta?a.wheelDelta/b:-a.detail*(b/10);return u.top=Math.max(0,Math.min(parseInt(v.height,10)-parseInt(u.height,10),parseInt(u.top,10)-c)),x(),a.preventDefault?void a.preventDefault():!1},A=function(a,b,c){u.top=Math.max(0,Math.min(parseInt(u.trackHeight,10)-parseInt(u.height,10),c)),a.stopPropagation()},B=function(a){var b=a.pageY-i[0].scrollTop-q,c=0;A(a,c,b),x()},C=function(a){var c=d[0].parentElement.offsetTop,e=void 0!==t[0].onmousewheel?"mousewheel":"DOMMouseScroll",l=s.bottom||a.rollToBottom,r=s.top||a.rollToTop;f=angular.element(d.children()[0]),g=angular.element(f.children()[0]),h=angular.element(f.children()[1]),i=angular.element(angular.element(h.children()[0]).children()[0]),j=angular.element(i.children()[0]),k=angular.element(angular.element(h.children()[0]).children()[1]),v.height=d[0].offsetHeight-c,v.scrollHeight=g[0].scrollHeight,v.height<v.scrollHeight?(b.showYScrollbar=!0,u.height=Math.round(v.height/v.scrollHeight*v.height),u.trackHeight=v.height,w(),d.css({overflow:"hidden"}),f.css(m),g.css(p),i.css(n),j.css(o),k.bind("click",y),g[0].addEventListener(e,z,!1),i.on("mousedown",function(a){q=a.pageY-i[0].offsetTop,t.on("mouseup",function(){t.off("mousemove",B),a.stopPropagation()}),t.on("mousemove",B),a.preventDefault()}),l?(s.bottom=!1,u.top=parseInt(v.height,10)-parseInt(u.height,10)):u.top=r?0:Math.max(0,Math.min(parseInt(v.height,10)-parseInt(u.height,10),parseInt(u.top,10))),x()):(b.showYScrollbar=!1,i.off("mousedown"),g[0].removeEventListener(e,z,!1),g.attr("style","position:relative;top:0"),f.css({height:"100%"}))},D={},E=function(a,c){null!=r&&clearTimeout(r),D={rollToBottom:!!c&&!!c.rollToBottom,rollToTop:!!c&&!!c.rollToTop},r=setTimeout(function(){v.height=null,C(D),b.$$phase||b.$digest()},72)};C(D),e.rebuildOn&&e.rebuildOn.split(" ").forEach(function(b){l=a.$on(b,E)}),e.hasOwnProperty("rebuildOnResize")&&t.on("resize",E),b.$on("$destroy",function(){angular.isFunction(l)&&l()})},template:'<div><div class="ngsb-wrap"><div class="ngsb-container" ng-transclude></div><div class="ngsb-scrollbar" style="position: absolute; display: block;" ng-show="showYScrollbar"><div class="ngsb-thumb-container"><div class="ngsb-thumb-pos" oncontextmenu="return false;"><div class="ngsb-thumb" ></div></div><div class="ngsb-track"></div></div></div></div></div>'}}]);